@model  Monografia.Models.Modelo_contenedor

@{
    Layout = "~/Views/Menu/Menu_tienda.cshtml";
}
@Styles.Render("~/Scripts/Datatable")


<div class="card border-start border-0 border-3 border-info">
    <div class="card-header">
        <h4 class="text-center">Reporte de productos vendidos</h4>
    </div>
    <div class="card-body">
        <br>
        <div class="alert alert-danger bg-danger text-light border-0 alert-dismissible fade show" style="@(ViewBag.Mensaje != null ? "display: block;" : "display: none;")" role="alert">

            @Html.Raw(@ViewBag.Mensaje)

            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
        <div class="row">
            <div class="col-md-10">
                @using (Html.BeginForm("Ventas_por_periodo", "Facturacion", FormMethod.Post))
                {
                    <div class="row">

                        <div class="col-md-2">
                            @Html.Label("", "Mostrar ventas de:", htmlAttributes: new { @class = "form-label" })
                            @Html.DropDownListFor(model => model.SelectedValue, Model.Options, "Seleccione..", new { @class = "form-select", @onchange = "this.form.submit ();" })
                        </div>
                        @if (ViewBag.fechaparticular != null)
                        {
                            <div class="col-md-2">
                                @Html.Label("", "Desde:", htmlAttributes: new { @class = "form-label col-md-4" })
                                <div class="col-sm-12">
                                    @Html.EditorFor(model => model.Fechadesde, new { htmlAttributes = new { @class = "form-control", type = "date" } })
                                </div>
                            </div>

                            <div class="col-md-2">
                                @Html.Label("", "Hasta:", htmlAttributes: new { @class = "form-label col-md-4" })
                                <div class="col-sm-12">
                                    @Html.EditorFor(model => model.Fechahasta, new { htmlAttributes = new { @class = "form-control", type = "date" } })
                                </div>
                            </div>
                        }
                        &nbsp;

                        <div class="col-md-3 d-flex align-items-end">
                            @if (ViewBag.fechaparticular != null)
                            {
                                <button type="submit" name="consultar" class="btn btn-primary">
                                    <i class="fa fa-save"></i> Consultar
                                </button>
                            }
                            &nbsp;
                          
                        </div>

                    </div>


                }
            </div>

        </div>
        <br>
        <br>
        <table id="tbreportventasporperiodo" class="table table-striped table-bordered" style="width:100%">
            <thead>
                <tr>
                    <th scope="col">#</th>
                    <th>
                        @Html.DisplayName("Código de producto")
                    </th>
                    <th>
                        @Html.DisplayName("Descripción")
                    </th>
                    <th>
                        @Html.DisplayName("Cantidad")
                    </th>
                    <th>
                        @Html.DisplayName("Precio de venta")
                    </th>
                    <th>
                        @Html.DisplayName("Departamento")
                    </th>
                </tr>
            </thead>
            <tbody>
                @{
                    int i = 0; // Inicializa el contador de fila
                }
                @foreach (var item in Model.listadetallefactura)
                {
                    i++;
                    <tr>
                        <td scope="row">@(i)</td>
                        <td>
                            @Html.DisplayFor(modelItem => item.productos.Codigo_producto)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.productos.Descripcion)
                        </td>
                        <th>
                            @Html.DisplayFor(modelItem => item.Cantidad)
                        </th>
                        <td>
                            @Html.DisplayFor(modelItem => item.productos.Precio_venta)
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.productos.departamento.Descripcion)
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>



</div>
@section Scripts
{
    @Scripts.Render("~/bundles/datatables")
    <script type="text/javascript">
        $(function () {
            $('#tbreportventasporperiodo').DataTable({
                    "language": {
                        "url": "/Scripts/es_es.json"
                    },scrollX:true
                })
            var tableIds = ['tbreportventasporperiodo']; // Lista de IDs de las tablas
            redimensionatable(tableIds);
            });

    </script>
}








